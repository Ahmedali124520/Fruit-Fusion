<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fruit Fusion Premium - Fun Puzzle Game</title>
    <meta name="description" content="Merge fruits to create exotic combinations! Play Fruit Fusion Premium, the addictive puzzle game that challenges your strategic thinking.">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --cherry: #FF6B6B;
            --strawberry: #FF8E8E;
            --apple: #FF3E3E;
            --lemon: #FFE66D;
            --orange: #FFA500;
            --peach: #FFB347;
            --watermelon: #FF6B6B;
            --pineapple: #FFD700;
            --dragonfruit: #FF6B8B;
            --kiwi: #8EE4AF;
            --mango: #FFA64D;
            --grape: #9B59B6;
            --blueberry: #3498DB;
            --blackberry: #8E44AD;
            --raspberry: #E91E63;
            --background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            --card: rgba(255, 255, 255, 0.9);
            --text: #2d3436;
            --shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            --highlight: #00cec9;
            --header-bg: rgba(255, 255, 255, 0.95);
            --footer-bg: #2d3436;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: var(--background);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }
        
        /* Header Styles */
        header {
            background-color: var(--header-bg);
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 1rem;
            backdrop-filter: blur(10px);
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
        }
        
        .logo-icon {
            font-size: 2rem;
            background: linear-gradient(45deg, #FF6B6B, #FFD166, #06D6A0, #118AB2);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .logo-text {
            font-family: 'Fredoka One', cursive;
            font-size: 1.8rem;
            background: linear-gradient(45deg, #FF6B6B, #FFD166);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 1.5rem;
        }
        
        nav a {
            text-decoration: none;
            color: var(--text);
            font-weight: 600;
            transition: color 0.3s;
            font-size: 1rem;
        }
        
        nav a:hover {
            color: var(--highlight);
        }
        
        /* Main Content Area */
        .content-wrapper {
            display: flex;
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
            gap: 2rem;
            width: 100%;
        }
        
        .main-content {
            flex: 1;
        }
        
        .sidebar {
            width: 300px;
        }
        
        /* Ad Containers */
        .ad-container {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 1rem;
            min-height: 250px;
            background: linear-gradient(135deg, #ffffff 0%, #f3f4f6 100%);
            border: 1px solid #e5e7eb;
        }
        
        .ad-label {
            font-size: 0.8rem;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 0.5rem;
        }
        
        .ad-content {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #4b5563;
            font-size: 1.2rem;
            gap: 1rem;
        }
        
        .ad-icon {
            font-size: 2.5rem;
            color: var(--highlight);
        }
        
        .ad-text {
            font-weight: 600;
        }
        
        .ad-leaderboard {
            max-width: 1000px;
            margin: 0 auto 2rem;
            min-height: 90px;
            padding: 1rem;
        }
        
        .ad-leaderboard .ad-content {
            flex-direction: row;
            gap: 1.5rem;
        }
        
        /* Game Area */
        .game-container {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
        }
        
        .game-header {
            text-align: center;
            margin-bottom: 1.5rem;
            width: 100%;
            position: relative;
        }
        
        .game-title {
            font-family: 'Fredoka One', cursive;
            font-size: 3.5rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(45deg, #FF6B6B, #FFD166, #06D6A0, #118AB2);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: gradient 8s ease infinite;
            background-size: 400% 400%;
            position: relative;
            display: inline-block;
        }
        
        .game-title::after {
            content: 'PREMIUM';
            position: absolute;
            top: -10px;
            right: -30px;
            font-size: 1rem;
            background: gold;
            color: #000;
            padding: 2px 10px;
            border-radius: 20px;
            transform: rotate(15deg);
            font-weight: bold;
        }
        
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .game-description {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: #636e72;
            max-width: 500px;
            margin: 0 auto 1.5rem;
        }
        
        .game-info {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-bottom: 1.5rem;
            gap: 1rem;
        }
        
        .score-container, .next-fruit-container, .high-score-container {
            background: var(--card);
            border-radius: 15px;
            padding: 1rem 1.5rem;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            font-weight: 600;
            flex: 1;
            min-width: 0;
            position: relative;
            overflow: hidden;
        }
        
        .high-score-container {
            display: none; /* Will be shown when first game ends */
        }
        
        .score-value, .high-score-value {
            font-size: 1.5rem;
            color: var(--highlight);
            margin-left: 0.5rem;
            font-weight: 700;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .next-fruit-preview {
            width: 50px;
            height: 50px;
            margin-left: 1rem;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
        }
        
        .game-board {
            width: 100%;
            aspect-ratio: 1/1;
            max-width: 500px;
            margin: 0 auto;
            background: var(--card);
            border-radius: 20px;
            box-shadow: var(--shadow);
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-template-rows: repeat(5, 1fr);
            gap: 10px;
            padding: 15px;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
            user-select: none;
        }
        
        .game-board::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M30,30 L70,30 L70,70 L30,70 Z" fill="none" stroke="%23f0f0f0" stroke-width="2"/></svg>') center/contain no-repeat;
            opacity: 0.05;
            pointer-events: none;
        }
        
        .cell {
            background: rgba(255, 255, 255, 0.7);
            border-radius: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: inset 0 0 15px rgba(0,0,0,0.05);
        }
        
        .cell.highlight {
            animation: cellPulse 1s infinite;
        }
        
        @keyframes cellPulse {
            0%, 100% { box-shadow: inset 0 0 0 3px gold; }
            50% { box-shadow: inset 0 0 0 6px gold; }
        }
        
        .fruit {
            width: 80%;
            height: 80%;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            user-select: none;
            cursor: grab;
            position: absolute;
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 10;
            background-size: cover;
            background-position: center;
            filter: drop-shadow(0 8px 15px rgba(0,0,0,0.2));
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
        }
        
        .fruit:active {
            cursor: grabbing;
            transform: scale(1.1) !important;
            z-index: 100;
            animation: none;
        }
        
        .fruit.merging {
            animation: mergePulse 0.5s ease-out forwards;
            z-index: 50;
        }
        
        @keyframes mergePulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.8; }
            100% { transform: scale(0); opacity: 0; }
        }
        
        .fruit.new {
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards, float 3s ease-in-out infinite;
        }
        
        @keyframes popIn {
            0% { transform: scale(0); }
            70% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        /* Fruit level styles */
        .level-1 { background-color: var(--cherry); }
        .level-2 { background-color: var(--strawberry); }
        .level-3 { background-color: var(--apple); }
        .level-4 { background-color: var(--lemon); }
        .level-5 { background-color: var(--orange); }
        .level-6 { background-color: var(--peach); }
        .level-7 { background-color: var(--watermelon); }
        .level-8 { background-color: var(--pineapple); }
        .level-9 { background-color: var(--dragonfruit); }
        .level-10 { background-color: var(--kiwi); }
        .level-11 { background-color: var(--mango); }
        .level-12 { background-color: var(--grape); }
        .level-13 { background-color: var(--blueberry); }
        .level-14 { background-color: var(--blackberry); }
        .level-15 { background-color: var(--raspberry); }
        
        .fruit::before {
            content: '';
            position: absolute;
            top: 15%;
            left: 20%;
            width: 20%;
            height: 20%;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            transform: rotate(35deg);
            filter: blur(1px);
        }
        
        .fruit::after {
            content: '';
            position: absolute;
            bottom: 15%;
            right: 15%;
            width: 10%;
            height: 10%;
            background: rgba(0, 0, 0, 0.15);
            border-radius: 50%;
        }
        
        .controls {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            width: 100%;
            justify-content: center;
        }
        
        .btn {
            background: linear-gradient(45deg, #FF6B6B, #FF8E8E);
            color: white;
            border: none;
            padding: 0.8rem 1.8rem;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 700;
            box-shadow: 0 5px 20px rgba(255, 107, 107, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
        }
        
        .btn::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255,255,255,0) 0%,
                rgba(255,255,255,0) 45%,
                rgba(255,255,255,0.5) 48%,
                rgba(255,255,255,0.8) 50%,
                rgba(255,255,255,0.5) 52%,
                rgba(255,255,255,0) 55%,
                rgba(255,255,255,0) 100%
            );
            transform: rotate(30deg);
            transition: all 0.3s;
            opacity: 0;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
        }
        
        .btn:hover::after {
            animation: shine 1.5s ease-out infinite;
        }
        
        @keyframes shine {
            0% { opacity: 0; left: -50%; }
            20% { opacity: 0.8; }
            100% { opacity: 0; left: 150%; }
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .btn-secondary {
            background: linear-gradient(45deg, #6B6BFF, #8E8EFF);
            box-shadow: 0 5px 20px rgba(107, 107, 255, 0.3);
        }
        
        .btn-secondary:hover {
            box-shadow: 0 8px 25px rgba(107, 107, 255, 0.4);
        }
        
        .btn-premium {
            background: linear-gradient(45deg, #FFD166, #FF9E7D);
            box-shadow: 0 5px 20px rgba(255, 209, 102, 0.3);
        }
        
        .btn-premium:hover {
            box-shadow: 0 8px 25px rgba(255, 209, 102, 0.4);
        }
        
        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            pointer-events: none;
            z-index: 5;
            filter: blur(1px);
        }
        
        .confetti {
            position: fixed;
            width: 12px;
            height: 12px;
            background: #f00;
            opacity: 0;
            z-index: 999;
            pointer-events: none;
        }
        
        .level-up {
            position: absolute;
            font-size: 2.5rem;
            font-weight: bold;
            color: gold;
            text-shadow: 0 0 15px rgba(0,0,0,0.7);
            opacity: 0;
            z-index: 100;
            pointer-events: none;
            animation: levelUp 1.5s ease-out forwards;
        }
        
        @keyframes levelUp {
            0% { transform: scale(0.5) translateY(0); opacity: 0; }
            20% { transform: scale(1.3) translateY(-20px); opacity: 1; }
            80% { opacity: 1; }
            100% { transform: scale(0.8) translateY(-100px); opacity: 0; }
        }
        
        .audio-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }
        
        .audio-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: rgba(255,255,255,0.9);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }
        
        .audio-btn:hover {
            transform: scale(1.1);
            background: white;
        }
        
        .game-over {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 200;
            border-radius: 20px;
            color: white;
            text-align: center;
            padding: 2rem;
            backdrop-filter: blur(5px);
            animation: fadeIn 0.5s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .game-over h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: #fff;
            text-shadow: 0 3px 10px rgba(0,0,0,0.3);
        }
        
        .game-over p {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            color: #fdcb6e;
        }
        
        .game-over .stats {
            display: flex;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .game-over .stat {
            background: rgba(255,255,255,0.1);
            padding: 1rem 1.5rem;
            border-radius: 10px;
            min-width: 120px;
        }
        
        .game-over .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #fff;
            margin-top: 0.5rem;
            display: block;
        }
        
        .game-over .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .combo-meter {
            position: absolute;
            top: -30px;
            right: 20px;
            font-size: 1.2rem;
            font-weight: 700;
            color: white;
            background: rgba(0,0,0,0.7);
            padding: 5px 15px;
            border-radius: 20px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
            z-index: 50;
        }
        
        .combo-meter.active {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Additional Website Sections */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }
        
        .feature-card {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: var(--shadow);
            text-align: center;
        }
        
        .feature-icon {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(45deg, #FF6B6B, #FFD166);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .feature-title {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }
        
        /* Footer */
        footer {
            background: var(--footer-bg);
            color: white;
            padding: 3rem 1rem;
            margin-top: auto;
        }
        
        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }
        
        .footer-column h3 {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            position: relative;
            padding-bottom: 0.5rem;
        }
        
        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 3px;
            background: var(--highlight);
            border-radius: 3px;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 0.8rem;
        }
        
        .footer-links a {
            color: #a0aec0;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            color: white;
            transition: all 0.3s;
        }
        
        .social-links a:hover {
            background: var(--highlight);
            transform: translateY(-3px);
        }
        
        .copyright {
            text-align: center;
            padding-top: 2rem;
            margin-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: #a0aec0;
            font-size: 0.9rem;
        }
        
        /* Responsive Adjustments */
        @media (max-width: 992px) {
            .content-wrapper {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                display: flex;
                flex-wrap: wrap;
                gap: 1.5rem;
            }
            
            .ad-container {
                flex: 1;
                min-width: 300px;
            }
        }
        
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                gap: 1rem;
            }
            
            nav ul {
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .game-title {
                font-size: 2.8rem;
            }
            
            .game-info {
                flex-direction: column;
                gap: 1rem;
            }
            
            .high-score-container {
                display: flex;
            }
            
            .game-board {
                padding: 10px;
                gap: 8px;
            }
            
            .fruit {
                font-size: 1.8rem;
            }
            
            .controls {
                flex-wrap: wrap;
            }
            
            .btn {
                padding: 0.8rem 1.2rem;
                font-size: 0.9rem;
                flex: 1;
                min-width: 120px;
            }
            
            .game-over h2 {
                font-size: 2rem;
            }
            
            .game-over .stats {
                flex-direction: column;
                gap: 1rem;
            }
            
            .game-over .stat {
                padding: 0.8rem 1rem;
                min-width: 0;
            }
            
            .features {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .game-title {
                font-size: 2.2rem;
            }
            
            .logo-text {
                font-size: 1.5rem;
            }
            
            .ad-leaderboard .ad-content {
                flex-direction: column;
            }
        }
    </style>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
        data-ad-client="ca-pub-1444384417433125"></script>

</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <a href="#" class="logo">
                <div class="logo-icon">🍎</div>
                <div class="logo-text">Fruit Fusion</div>
            </a>
            <nav>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">How to Play</a></li>
                    <li><a href="#">Leaderboard</a></li>
                    <li><a href="#">Premium</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <!-- Leaderboard Ad -->
    <div class="ad-container ad-leaderboard">
        <div class="ad-label">Advertisement</div>
        <div class="ad-content">
            <i class="fas fa-ad ad-icon"></i>
            <div class="ad-text">AdMob Leaderboard Ad Space<br><small>(728×90)</small></div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="content-wrapper">
        <div class="main-content">
            <!-- Game Container -->
            <div class="game-container">
                <div class="game-header">
                    <h1 class="game-title">Fruit Fusion</h1>
                    <p class="game-description">Merge fruits to create exotic combinations and reach the highest score!</p>
                </div>
                
                <div class="game-info">
                    <div class="score-container">
                        Score: <span class="score-value" id="score">0</span>
                    </div>
                    <div class="next-fruit-container">
                        Next: 
                        <div class="next-fruit-preview" id="next-fruit-preview"></div>
                    </div>
                    <div class="high-score-container">
                        Best: <span class="high-score-value" id="high-score">0</span>
                    </div>
                </div>
                
                <div class="combo-meter" id="combo-meter"></div>
                
                <div class="game-board" id="game-board"></div>
                
                <div class="controls">
                    <button class="btn" id="new-game-btn">
                        <span>🔄</span> New Game
                    </button>
                    <button class="btn btn-secondary" id="hint-btn">
                        <span>💡</span> Hint
                    </button>
                    <button class="btn btn-premium" id="premium-btn" style="display: none;">
                        <span>⭐</span> Go Premium
                    </button>
                </div>
            </div>
            
            <!-- Features Section -->
            <div class="features">
                <div class="feature-card">
                    <div class="feature-icon">🍓</div>
                    <h3 class="feature-title">Merge & Upgrade</h3>
                    <p>Combine fruits to create new exotic varieties. Each merge unlocks higher levels and more points!</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🏆</div>
                    <h3 class="feature-title">Global Leaderboards</h3>
                    <p>Compete with players worldwide. Climb the ranks and show off your fruit merging skills!</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">⚡</div>
                    <h3 class="feature-title">Daily Challenges</h3>
                    <p>Complete special challenges every day to earn bonus points and exclusive rewards.</p>
                </div>
            </div>
        </div>
        
        <!-- Sidebar with Ad Space -->
        <div class="sidebar">
            
<div class="ad-container">
    <div class="ad-label">Advertisement</div>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-1444384417433125"
         data-ad-slot="3242470302"
         data-ad-format="rectangle"
         data-full-width-responsive="true"></ins>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

                <div class="ad-content">
                    <i class="fas fa-ad ad-icon"></i>
                    <div class="ad-text">AdMob Banner Ad<br><small>(300×250)</small></div>
                </div>
            </div>
            
            <div class="ad-container">
                <div class="ad-label">Advertisement</div>
                <div class="ad-content">
                    <i class="fas fa-ad ad-icon"></i>
                    <div class="ad-text">AdMob Banner Ad<br><small>(300×600)</small></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer Ad -->
    <div class="ad-container ad-leaderboard">
        <div class="ad-label">Advertisement</div>
        <div class="ad-content">
            <i class="fas fa-ad ad-icon"></i>
            <div class="ad-text">AdMob Leaderboard Ad Space<br><small>(728×90)</small></div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <div class="footer-column">
                <h3>Fruit Fusion</h3>
                <p>The ultimate fruit merging puzzle game. Combine fruits strategically to create exotic combinations and achieve the highest score!</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
            
            <div class="footer-column">
                <h3>Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="#">Home</a></li>
                    <li><a href="#">How to Play</a></li>
                    <li><a href="#">Leaderboard</a></li>
                    <li><a href="#">Premium Features</a></li>
                    <li><a href="#">FAQs</a></li>
                </ul>
            </div>
            
            <div class="footer-column">
                <h3>Legal</h3>
                <ul class="footer-links">
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms of Service</a></li>
                    <li><a href="#">Cookie Policy</a></li>
                    <li><a href="#">GDPR Compliance</a></li>
                </ul>
            </div>
            
            <div class="footer-column">
                <h3>Contact Us</h3>
                <ul class="footer-links">
                    <li><i class="fas fa-envelope"></i> support@fruitfusion.com</li>
                    <li><i class="fas fa-globe"></i> www.fruitfusion.com</li>
                </ul>
            </div>
        </div>
        
        <div class="copyright">
            &copy; 2023 Fruit Fusion Premium. All rights reserved.
        </div>
    </footer>
    
    <!-- Audio Controls -->
    <div class="audio-controls">
        <button class="audio-btn" id="bgm-toggle">🎵</button>
        <button class="audio-btn" id="sfx-toggle">🔊</button>
    </div>

    <!-- Audio elements -->
    <audio id="bgm" loop>
        <source src="https://assets.mixkit.co/music/preview/mixkit-game-show-suspense-waiting-668.mp3" type="audio/mpeg">
    </audio>
    <audio id="merge-sound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3" type="audio/mpeg">
    </audio>
    <audio id="drop-sound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-quick-jump-arcade-game-239.mp3" type="audio/mpeg">
    </audio>
    <audio id="new-fruit-sound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3" type="audio/mpeg">
    </audio>
    <audio id="game-over-sound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-retro-arcade-lose-2027.mp3" type="audio/mpeg">
    </audio>
    <audio id="level-up-sound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3" type="audio/mpeg">
    </audio>
    <audio id="combo-sound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-extra-bonus-in-a-video-game-2045.mp3" type="audio/mpeg">
    </audio>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Game constants
            const FRUIT_TYPES = [
                '🍒', '🍓', '🍎', '🍋', '🍊', 
                '🍑', '🍉', '🍍', '🥝', '🥭',
                '🍇', '🫐', '🍈', '🍐', '🍌'
            ];
            const FRUIT_NAMES = [
                'Cherry', 'Strawberry', 'Apple', 'Lemon', 'Orange',
                'Peach', 'Watermelon', 'Pineapple', 'Kiwi', 'Mango',
                'Grapes', 'Blueberry', 'Melon', 'Pear', 'Banana'
            ];
            const BOARD_SIZE = 5;
            
            // Game state
            let score = 0;
            let highScore = localStorage.getItem('fruitFusionHighScore') || 0;
            let nextFruitLevel = 1;
            let draggedFruit = null;
            let boardState = Array(BOARD_SIZE).fill().map(() => Array(BOARD_SIZE).fill(null));
            let bgmEnabled = true;
            let sfxEnabled = true;
            let gameActive = true;
            let isDragging = false;
            let comboCount = 0;
            let lastMergeTime = 0;
            let movesCount = 0;
            let highestLevelReached = 1;
            
            // DOM elements
            const board = document.getElementById('game-board');
            const scoreElement = document.getElementById('score');
            const highScoreElement = document.getElementById('high-score');
            const nextFruitPreview = document.getElementById('next-fruit-preview');
            const newGameBtn = document.getElementById('new-game-btn');
            const hintBtn = document.getElementById('hint-btn');
            const premiumBtn = document.getElementById('premium-btn');
            const bgmToggle = document.getElementById('bgm-toggle');
            const sfxToggle = document.getElementById('sfx-toggle');
            const comboMeter = document.getElementById('combo-meter');
            const bgm = document.getElementById('bgm');
            const mergeSound = document.getElementById('merge-sound');
            const dropSound = document.getElementById('drop-sound');
            const newFruitSound = document.getElementById('new-fruit-sound');
            const gameOverSound = document.getElementById('game-over-sound');
            const levelUpSound = document.getElementById('level-up-sound');
            const comboSound = document.getElementById('combo-sound');
            
            // Initialize the game board
            function initBoard() {
                board.innerHTML = '';
                for (let row = 0; row < BOARD_SIZE; row++) {
                    for (let col = 0; col < BOARD_SIZE; col++) {
                        const cell = document.createElement('div');
                        cell.className = 'cell';
                        cell.dataset.row = row;
                        cell.dataset.col = col;
                        
                        // Add drag and drop events
                        cell.addEventListener('dragover', (e) => {
                            e.preventDefault();
                            if (draggedFruit && gameActive && !isDragging) {
                                cell.style.transform = 'scale(0.95)';
                                cell.style.background = 'rgba(255, 255, 255, 0.95)';
                            }
                        });
                        
                        cell.addEventListener('dragleave', () => {
                            cell.style.transform = '';
                            cell.style.background = '';
                        });
                        
                        cell.addEventListener('drop', (e) => {
                            e.preventDefault();
                            cell.style.transform = '';
                            cell.style.background = '';
                            
                            if (draggedFruit && gameActive && !isDragging) {
                                handleDrop(draggedFruit, cell);
                            }
                        });
                        
                        // Touch events for mobile
                        cell.addEventListener('touchmove', (e) => {
                            e.preventDefault();
                            if (draggedFruit && gameActive && !isDragging) {
                                const touch = e.touches[0];
                                const element = document.elementFromPoint(touch.clientX, touch.clientY);
                                if (element && element.classList.contains('cell')) {
                                    element.style.transform = 'scale(0.95)';
                                    element.style.background = 'rgba(255, 255, 255, 0.95)';
                                }
                            }
                        }, { passive: false });
                        
                        cell.addEventListener('touchend', (e) => {
                            if (draggedFruit && gameActive && !isDragging) {
                                const touch = e.changedTouches[0];
                                const element = document.elementFromPoint(touch.clientX, touch.clientY);
                                if (element && element.classList.contains('cell')) {
                                    element.style.transform = '';
                                    element.style.background = '';
                                    handleDrop(draggedFruit, element);
                                }
                            }
                        });
                        
                        board.appendChild(cell);
                    }
                }
            }
            
            // Handle drop operation
            function handleDrop(fruitElement, targetCell) {
                const targetRow = parseInt(targetCell.dataset.row);
                const targetCol = parseInt(targetCell.dataset.col);
                const sourceRow = parseInt(fruitElement.dataset.row);
                const sourceCol = parseInt(fruitElement.dataset.col);
                
                // Don't allow dropping on same cell
                if (sourceRow === targetRow && sourceCol === targetCol) return;
                
                // Check if the cell is empty
                if (!boardState[targetRow][targetCol]) {
                    playSound(dropSound);
                    moveFruit(fruitElement, targetRow, targetCol);
                    movesCount++;
                } else if (boardState[targetRow][targetCol].level === parseInt(fruitElement.dataset.level)) {
                    isDragging = true;
                    mergeFruits(fruitElement, targetRow, targetCol);
                    movesCount++;
                }
            }
            
            // Create a new fruit element
            function createFruit(level, row, col) {
                const fruit = document.createElement('div');
                fruit.className = `fruit level-${level} new`;
                fruit.textContent = FRUIT_TYPES[level - 1];
                fruit.dataset.level = level;
                fruit.dataset.row = row;
                fruit.dataset.col = col;
                fruit.title = `${FRUIT_NAMES[level - 1]} (Level ${level})`;
                
                // Track highest level reached
                if (level > highestLevelReached) {
                    highestLevelReached = level;
                }
                
                // Remove new class after animation completes
                setTimeout(() => {
                    fruit.classList.remove('new');
                }, 500);
                
                // Make draggable
                fruit.draggable = true;
                
                // Drag events
                fruit.addEventListener('dragstart', (e) => {
                    if (!gameActive) {
                        e.preventDefault();
                        return;
                    }
                    
                    draggedFruit = fruit;
                    e.dataTransfer.setData('text/plain', '');
                    fruit.style.transform = 'scale(1.1) rotate(10deg)';
                    fruit.style.opacity = '0.8';
                    fruit.style.zIndex = '100';
                    
                    // Create particles on drag start
                    createParticles(fruit);
                });
                
                fruit.addEventListener('dragend', () => {
                    fruit.style.transform = '';
                    fruit.style.opacity = '';
                    fruit.style.zIndex = '';
                    draggedFruit = null;
                    isDragging = false;
                });
                
                // Touch events for mobile
                fruit.addEventListener('touchstart', (e) => {
                    if (!gameActive) {
                        e.preventDefault();
                        return;
                    }
                    
                    draggedFruit = fruit;
                    fruit.style.transform = 'scale(1.1) rotate(10deg)';
                    fruit.style.opacity = '0.8';
                    fruit.style.zIndex = '100';
                    
                    // Create particles on drag start
                    createParticles(fruit);
                }, { passive: false });
                
                fruit.addEventListener('touchend', () => {
                    fruit.style.transform = '';
                    fruit.style.opacity = '';
                    fruit.style.zIndex = '';
                    draggedFruit = null;
                    isDragging = false;
                });
                
                return fruit;
            }
            
            // Move a fruit to a new position
            function moveFruit(fruit, newRow, newCol) {
                const oldRow = parseInt(fruit.dataset.row);
                const oldCol = parseInt(fruit.dataset.col);
                
                // Update board state
                boardState[oldRow][oldCol] = null;
                boardState[newRow][newCol] = {
                    element: fruit,
                    level: parseInt(fruit.dataset.level)
                };
                
                // Update fruit position
                fruit.dataset.row = newRow;
                fruit.dataset.col = newCol;
                
                // Move the fruit element to the new cell
                const newCell = document.querySelector(`.cell[data-row="${newRow}"][data-col="${newCol}"]`);
                newCell.appendChild(fruit);
                
                // Add new random fruit
                setTimeout(() => {
                    addRandomFruit();
                }, 300);
            }
            
            // Merge two fruits of the same level
            function mergeFruits(fruit, targetRow, targetCol) {
                const targetFruit = boardState[targetRow][targetCol];
                const level = parseInt(fruit.dataset.level);
                
                if (level < FRUIT_TYPES.length) {
                    // Check for combo
                    const currentTime = Date.now();
                    if (currentTime - lastMergeTime < 2000) { // 2 second combo window
                        comboCount++;
                        updateComboMeter();
                    } else {
                        comboCount = 1;
                    }
                    lastMergeTime = currentTime;
                    
                    playSound(mergeSound);
                    
                    // Remove both fruits
                    const oldRow = parseInt(fruit.dataset.row);
                    const oldCol = parseInt(fruit.dataset.col);
                    
                    boardState[oldRow][oldCol] = null;
                    boardState[targetRow][targetCol] = null;
                    
                    // Animate merging
                    fruit.classList.add('merging');
                    targetFruit.element.classList.add('merging');
                    
                    // Create particles
                    createParticles(fruit);
                    createParticles(targetFruit.element);
                    
                    // Remove fruits after animation
                    setTimeout(() => {
                        fruit.remove();
                        targetFruit.element.remove();
                        
                        // Create a new higher-level fruit
                        const newLevel = level + 1;
                        const newFruit = createFruit(newLevel, targetRow, targetCol);
                        boardState[targetRow][targetCol] = {
                            element: newFruit,
                            level: newLevel
                        };
                        
                        const cell = document.querySelector(`.cell[data-row="${targetRow}"][data-col="${targetCol}"]`);
                        cell.appendChild(newFruit);
                        
                        // Show level up effect
                        showLevelUp(targetRow, targetCol, newLevel);
                        
                        // Update score with combo multiplier
                        const basePoints = newLevel * 10;
                        const comboMultiplier = 1 + (comboCount * 0.2); // 20% bonus per combo
                        const points = Math.floor(basePoints * comboMultiplier);
                        
                        score += points;
                        updateScore(points);
                        
                        // Add new random fruit
                        setTimeout(() => {
                            addRandomFruit();
                            isDragging = false;
                        }, 500);
                    }, 500);
                } else {
                    isDragging = false;
                }
            }
            
            // Update combo meter
            function updateComboMeter() {
                if (comboCount > 1) {
                    comboMeter.textContent = `COMBO x${comboCount}!`;
                    comboMeter.classList.add('active');
                    playSound(comboSound);
                    
                    setTimeout(() => {
                        comboMeter.classList.remove('active');
                    }, 1500);
                }
            }
            
            // Show level up animation
            function showLevelUp(row, col, level) {
                playSound(levelUpSound);
                
                const cell = document.querySelector(`.cell[data-row="${row}"][data-col="${col}"]`);
                const levelUp = document.createElement('div');
                levelUp.className = 'level-up';
                levelUp.textContent = `+${level*10}!`;
                cell.appendChild(levelUp);
                
                // Create confetti
                createConfetti(cell);
                
                setTimeout(() => {
                    levelUp.remove();
                }, 1500);
            }
            
            // Update score with animation
            function updateScore(points) {
                const startScore = score - points;
                const endScore = score;
                let current = startScore;
                
                const interval = setInterval(() => {
                    current += Math.ceil(points / 10);
                    if (current >= endScore) {
                        current = endScore;
                        clearInterval(interval);
                    }
                    scoreElement.textContent = current;
                }, 30);
            }
            
            // Add a random fruit to an empty cell
            function addRandomFruit() {
                if (!gameActive) return;
                
                const emptyCells = [];
                
                for (let row = 0; row < BOARD_SIZE; row++) {
                    for (let col = 0; col < BOARD_SIZE; col++) {
                        if (!boardState[row][col]) {
                            emptyCells.push({ row, col });
                        }
                    }
                }
                
                if (emptyCells.length > 0) {
                    playSound(newFruitSound);
                    
                    const randomCell = emptyCells[Math.floor(Math.random() * emptyCells.length)];
                    const fruit = createFruit(nextFruitLevel, randomCell.row, randomCell.col);
                    boardState[randomCell.row][randomCell.col] = {
                        element: fruit,
                        level: nextFruitLevel
                    };
                    
                    const cell = document.querySelector(`.cell[data-row="${randomCell.row}"][data-col="${randomCell.col}"]`);
                    cell.appendChild(fruit);
                    
                    // Set next fruit level (weighted towards lower levels)
                    const rand = Math.random();
                    if (rand < 0.6) {
                        nextFruitLevel = 1;
                    } else if (rand < 0.9) {
                        nextFruitLevel = 2;
                    } else {
                        nextFruitLevel = 3;
                    }
                    updateNextFruitPreview();
                    
                    // Check if game is over after a short delay
                    setTimeout(checkGameOver, 300);
                } else {
                    checkGameOver();
                }
            }
            
            // Check if game is over (no possible moves)
            function checkGameOver() {
                if (!gameActive) return;
                
                // First check if board is full
                const isBoardFull = boardState.every(row => row.every(cell => cell !== null));
                if (isBoardFull) {
                    // Double check if there are any possible merges when board is full
                    if (!hasPossibleMoves()) {
                        gameOver();
                    }
                    return;
                }
                
                // If board isn't full, game isn't over
                if (!isBoardFull) return;
            }
            
            // Check if there are any possible moves left
            function hasPossibleMoves() {
                // Check all adjacent cells for possible merges
                for (let row = 0; row < BOARD_SIZE; row++) {
                    for (let col = 0; col < BOARD_SIZE; col++) {
                        if (boardState[row][col]) {
                            const currentLevel = boardState[row][col].level;
                            
                            // Check adjacent cells
                            const directions = [[0, 1], [1, 0], [0, -1], [-1, 0]];
                            for (const [dx, dy] of directions) {
                                const newRow = row + dx;
                                const newCol = col + dy;
                                
                                if (newRow >= 0 && newRow < BOARD_SIZE && newCol >= 0 && newCol < BOARD_SIZE) {
                                    if (boardState[newRow][newCol] && boardState[newRow][newCol].level === currentLevel) {
                                        return true; // There's at least one possible merge
                                    }
                                }
                            }
                        }
                    }
                }
                
                return false; // No possible moves left
            }
            
            // Handle game over
            function gameOver() {
                if (!gameActive) return;
                
                gameActive = false;
                playSound(gameOverSound);
                
                // Update high score
                if (score > highScore) {
                    highScore = score;
                    localStorage.setItem('fruitFusionHighScore', highScore);
                    highScoreElement.textContent = highScore;
                }
                
                // Show game over message
                const gameOverDiv = document.createElement('div');
                gameOverDiv.className = 'game-over';
                gameOverDiv.innerHTML = `
                    <h2>Game Over!</h2>
                    <p>Your score: ${score}</p>
                    
                    <div class="stats">
                        <div class="stat">
                            <span class="stat-label">Highest Fruit</span>
                            <span class="stat-value">${FRUIT_TYPES[highestLevelReached - 1]}</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Moves</span>
                            <span class="stat-value">${movesCount}</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Highest Combo</span>
                            <span class="stat-value">${comboCount > 1 ? 'x'+comboCount : 'None'}</span>
                        </div>
                    </div>
                    
                    <button class="btn">
                        <span>🔄</span> Play Again
                    </button>
                `;
                
                gameOverDiv.querySelector('button').addEventListener('click', () => {
                    gameOverDiv.remove();
                    newGame();
                });
                
                board.appendChild(gameOverDiv);
                
                // Show premium button after first game
                premiumBtn.style.display = 'flex';
                document.querySelector('.high-score-container').style.display = 'flex';
            }
            
            // Update the next fruit preview
            function updateNextFruitPreview() {
                nextFruitPreview.innerHTML = '';
                const previewFruit = document.createElement('div');
                previewFruit.className = `fruit level-${nextFruitLevel}`;
                previewFruit.textContent = FRUIT_TYPES[nextFruitLevel - 1];
                previewFruit.style.width = '100%';
                previewFruit.style.height = '100%';
                previewFruit.style.fontSize = '1.5rem';
                nextFruitPreview.appendChild(previewFruit);
            }
            
            // Create particles effect
            function createParticles(element) {
                const rect = element.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                
                for (let i = 0; i < 15; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.width = `${Math.random() * 8 + 4}px`;
                    particle.style.height = particle.style.width;
                    particle.style.left = `${centerX}px`;
                    particle.style.top = `${centerY}px`;
                    
                    // Random color based on fruit level
                    const hue = parseInt(element.dataset.level) * 25;
                    particle.style.background = `hsla(${hue}, 100%, 70%, 0.9)`;
                    
                    document.body.appendChild(particle);
                    
                    // Animate particle
                    const angle = Math.random() * Math.PI * 2;
                    const velocity = Math.random() * 6 + 3;
                    const x = Math.cos(angle) * velocity;
                    const y = Math.sin(angle) * velocity;
                    
                    let posX = centerX;
                    let posY = centerY;
                    let opacity = 1;
                    let size = parseFloat(particle.style.width);
                    
                    const animate = () => {
                        posX += x;
                        posY += y;
                        opacity -= 0.02;
                        size -= 0.1;
                        
                        particle.style.left = `${posX}px`;
                        particle.style.top = `${posY}px`;
                        particle.style.opacity = opacity;
                        particle.style.width = `${size}px`;
                        particle.style.height = `${size}px`;
                        
                        if (opacity > 0 && size > 0) {
                            requestAnimationFrame(animate);
                        } else {
                            particle.remove();
                        }
                    };
                    
                    requestAnimationFrame(animate);
                }
            }
            
            // Create confetti effect
            function createConfetti(element) {
                const rect = element.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                
                for (let i = 0; i < 50; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    
                    // Random shape (circle or square)
                    if (Math.random() > 0.5) {
                        confetti.style.borderRadius = '50%';
                    } else if (Math.random() > 0.8) {
                        // Triangle
                        confetti.style.clipPath = 'polygon(50% 0%, 0% 100%, 100% 100%)';
                        confetti.style.borderRadius = '0';
                    }
                    
                    // Random color
                    const colors = ['#FF6B6B', '#FFD166', '#06D6A0', '#118AB2', '#8E44AD', '#FD79A8'];
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    
                    // Random size
                    const size = Math.random() * 12 + 6;
                    confetti.style.width = `${size}px`;
                    confetti.style.height = `${size}px`;
                    
                    // Position at center
                    confetti.style.left = `${centerX}px`;
                    confetti.style.top = `${centerY}px`;
                    
                    document.body.appendChild(confetti);
                    
                    // Animate confetti
                    const angle = Math.random() * Math.PI * 2;
                    const velocity = Math.random() * 12 + 6;
                    const x = Math.cos(angle) * velocity;
                    let y = Math.sin(angle) * velocity - 8; // Add some upward motion
                    let rotation = Math.random() * 360;
                    let rotationSpeed = (Math.random() - 0.5) * 20;
                    let opacity = 1;
                    
                    const animate = () => {
                        y += 0.3; // Gravity
                        rotation += rotationSpeed;
                        opacity -= 0.01;
                        
                        confetti.style.left = `${parseFloat(confetti.style.left) + x}px`;
                        confetti.style.top = `${parseFloat(confetti.style.top) + y}px`;
                        confetti.style.opacity = opacity;
                        confetti.style.transform = `rotate(${rotation}deg)`;
                        
                        if (opacity > 0 && parseFloat(confetti.style.top) < window.innerHeight + 100) {
                            requestAnimationFrame(animate);
                        } else {
                            confetti.remove();
                        }
                    };
                    
                    requestAnimationFrame(animate);
                }
            }
            
            // Play sound effect
            function playSound(sound) {
                if (sfxEnabled && sound) {
                    sound.currentTime = 0;
                    sound.play().catch(e => console.log('Sound play prevented:', e));
                }
            }
            
            // Show hint (highlight possible merges)
            function showHint() {
                if (!gameActive) return;
                
                // First remove any existing hints
                document.querySelectorAll('.hint').forEach(el => el.classList.remove('hint'));
                
                // Find all possible merges
                const possibleMerges = [];
                
                for (let row = 0; row < BOARD_SIZE; row++) {
                    for (let col = 0; col < BOARD_SIZE; col++) {
                        if (boardState[row][col]) {
                            const currentLevel = boardState[row][col].level;
                            
                            // Check adjacent cells
                            const directions = [[0, 1], [1, 0], [0, -1], [-1, 0]];
                            for (const [dx, dy] of directions) {
                                const newRow = row + dx;
                                const newCol = col + dy;
                                
                                if (newRow >= 0 && newRow < BOARD_SIZE && newCol >= 0 && newCol < BOARD_SIZE) {
                                    if (boardState[newRow][newCol] && boardState[newRow][newCol].level === currentLevel) {
                                        possibleMerges.push([row, col]);
                                        possibleMerges.push([newRow, newCol]);
                                    }
                                }
                            }
                        }
                    }
                }
                
                if (possibleMerges.length === 0) {
                    // No possible moves, show premium button
                    premiumBtn.style.display = 'flex';
                    return;
                }
                
                // Highlight possible merges
                possibleMerges.forEach(([row, col]) => {
                    const cell = document.querySelector(`.cell[data-row="${row}"][data-col="${col}"]`);
                    if (cell) {
                        cell.classList.add('hint');
                    }
                });
                
                // Remove hints after 2 seconds
                setTimeout(() => {
                    document.querySelectorAll('.hint').forEach(el => el.classList.remove('hint'));
                }, 2000);
            }
            
            // Start a new game
            function newGame() {
                score = 0;
                scoreElement.textContent = score;
                nextFruitLevel = 1;
                boardState = Array(BOARD_SIZE).fill().map(() => Array(BOARD_SIZE).fill(null));
                gameActive = true;
                isDragging = false;
                comboCount = 0;
                movesCount = 0;
                highestLevelReached = 1;
                initBoard();
                updateNextFruitPreview();
                
                // Hide premium button during game
                premiumBtn.style.display = 'none';
                
                // Add initial fruits
                for (let i = 0; i < 3; i++) {
                    setTimeout(() => {
                        addRandomFruit();
                    }, i * 300);
                }
                
                // Start background music
                if (bgmEnabled) {
                    bgm.currentTime = 0;
                    bgm.play().catch(e => console.log('BGM play prevented:', e));
                }
            }
            
            // Event listeners
            newGameBtn.addEventListener('click', newGame);
            hintBtn.addEventListener('click', showHint);
            premiumBtn.addEventListener('click', () => {
                alert('Premium version coming soon with:\n- Unlimited undo\n- Special power-ups\n- Daily challenges\n- No ads!\n\nStay tuned!');
            });
            
            // Audio controls
            bgmToggle.addEventListener('click', () => {
                bgmEnabled = !bgmEnabled;
                bgmToggle.textContent = bgmEnabled ? '🎵' : '🔇';
                if (bgmEnabled) {
                    bgm.play().catch(e => console.log('BGM play prevented:', e));
                } else {
                    bgm.pause();
                }
            });
            
            sfxToggle.addEventListener('click', () => {
                sfxEnabled = !sfxEnabled;
                sfxToggle.textContent = sfxEnabled ? '🔊' : '🔇';
            });
            
            // Initialize high score display
            highScoreElement.textContent = highScore;
            
            // Start the game
            newGame();
        });
    </script>
</body>
</html>